package com.example.edge.cases

import java.util.*
import com.example.Person

// Edge case: rule with complex name
rule "Complex Rule Name with Spaces and Numbers 123"
    salience 50
    no-loop
    when
        // Edge case: complex variable binding
        $person : Person(
            age >= 18,
            name != null,
            address.city == "New York"
        )
        // Edge case: nested conditions
        exists(Account(owner == $person, balance > 1000.50))
        not(Debt(person == $person))
    then
        // Edge case: complex method calls
        System.out.println("Processing: " + $person.getName());
        logger.info("Account validated for " + $person.getId());
        
        // Edge case: modify with multiple properties
        modify($person) {
            setStatus("VERIFIED"),
            setLastUpdated(new Date())
        }
        
        // Edge case: string with escaped quotes
        String message = "Person said: \"Hello World!\"";
        
        // Edge case: mathematical operations
        double result = ($person.getAge() * 1.5) + 100;
end

// Edge case: function with complex signature
function List<String> processNames(List<Person> people, String prefix) {
    List<String> result = new ArrayList<>();
    for (Person p : people) {
        result.add(prefix + ": " + p.getName());
    }
    return result;
}

// Edge case: query with parameters
query "findPeopleByAge"(int minAge, int maxAge)
    $person : Person(age >= minAge, age <= maxAge)
end